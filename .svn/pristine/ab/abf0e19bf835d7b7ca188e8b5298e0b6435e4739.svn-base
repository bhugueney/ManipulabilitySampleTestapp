
#include "DrawObstacle.h"
#include <drawstuff/drawstuff.h> // The drawing library for ODE;
#include "Obstacle.h"
#include "kinematic/MatrixDefs.h"

#ifdef WIN32
#include <windows.h>
#endif

#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>
#include <GL/glui.h>


DrawObstacle::DrawObstacle(const Obstacle& obstacle)
{
	/*x1 = obstacle.p1_.x(); x2 = obstacle.p2_.x(); x3 = obstacle.p3_.x(); x4 = obstacle.p4_.x();
	y1 = obstacle.p1_.y(); y2 = obstacle.p2_.y(); y3 = obstacle.p3_.y(); y4 = obstacle.p4_.y();
	z1 = obstacle.p1_.z(); z2 = obstacle.p2_.z(); z3 = obstacle.p3_.z(); z4 = obstacle.p4_.z();*/

	// TODO
	matrices::Vector3 center = obstacle.Center();
	pos_[0] = center.x();
	pos_[1] = center.y();
	pos_[2] = center.z();

	sides_[0] = obstacle.GetW();
	sides_[1] = obstacle.GetH();
	sides_[2] =  0.01f;

	matrices::matrixToArray( R_, obstacle.Basis() );
}

DrawObstacle::~DrawObstacle()
{
	// TODO
}

void DrawObstacle::Draw() const
{
	dsSetColor(1.0f, 1.0f, 1.0f);
	dsDrawBox (pos_, R_, sides_);
	/*glColor3f(1.0f, 1.0f, 0.0f);
	glBegin(GL_POLYGON);
	glVertex3f( x1, y1, z1 );
	glVertex3f( x2, y2, z2 );
	glVertex3f( x3, y3, z3 );
	glVertex3f( x4, y4, z4 );
	glEnd();*/
}

void DrawObstacle::DrawRed() const
{
	dsSetColor(1.0f, 0.0f, 0.0f);
	dsDrawBox (pos_, R_, sides_);
	/*glBegin(GL_POLYGON);
	glVertex3f( x1, y1, z1 );
	glVertex3f( x2, y2, z2 );
	glVertex3f( x3, y3, z3 );
	glVertex3f( x4, y4, z4 );
	glEnd();*/
}