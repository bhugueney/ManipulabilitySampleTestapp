
#ifndef _CLASS_SUPPORT_POLYGON
#define _CLASS_SUPPORT_POLYGON

#include "MatrixDefs.h"
#include "Tree.h"

#include <memory>

struct SupportPolygonPImpl;

class Robot;
class Tree;
class SupportPolygonVisitor_ABC;

class SupportPolygon
{

public:
	 explicit SupportPolygon(const Robot& /*robot*/); //basis switch
	~SupportPolygon();

//helper
public:
	void Accept(SupportPolygonVisitor_ABC* /*visitor*/) const;

//request
public:
	bool Contains(const matrices::Vector3& /*aPoint*/) const;
	bool Contains(const matrices::Vector3& /*aPoint*/, matrices::Vector3& /*correction*/) const; // returns the min translation vector
	bool WouldContain(const matrices::Vector3& /*aPoint*/, const Robot& /*robot*/, const Tree& /*tree*/); // tree can contribute to sustain com
	bool WouldContain(const matrices::Vector3& /*aPoint*/, const matrices::Vector3& /*polygonPoint*/); // tree can contribute to sustain com
	Tree::TREE_ID ComputeTreeToLift(const matrices::Vector3& /*com*/);


private:
	std::auto_ptr<SupportPolygonPImpl> pImpl_;
};

#endif //_CLASS_SUPPORT_POLYGON