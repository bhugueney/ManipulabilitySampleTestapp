
#ifndef _CLASS_SAMPLEGENERATOR
#define _CLASS_SAMPLEGENERATOR

#include <memory>

class Sample;
class Tree;

class SampleGeneratorVisitor_ABC;
struct PImpl;

class SampleGenerator {

private:
	 SampleGenerator();
	~SampleGenerator();

	SampleGenerator(const SampleGenerator&); //Pas définie pour ne pas avoir a gérer les copies d'auto_ptr
	SampleGenerator& operator = (const SampleGenerator&); //idem

public:
	void GenerateSamples(Tree& /*tree*/, int nbSamples = 1);
	void Accept(SampleGeneratorVisitor_ABC& /*visitor*/);

private:
	static SampleGenerator* instance;
	
	std::auto_ptr<PImpl> pImpl_;

public:
	static SampleGenerator* GetInstance()
	{
		if(!instance)
		{
			instance = new SampleGenerator();
		}
		return instance;
	}
};

#endif //_CLASS_SAMPLEGENERATOR