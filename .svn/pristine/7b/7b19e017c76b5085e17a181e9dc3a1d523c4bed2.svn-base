
#ifndef _CLASS_ROOTTRAJECTORY
#define _CLASS_ROOTTRAJECTORY

#include "TimerHandler.h"
#include "MatrixDefs.h"
#include "spline/curve_abc.h"
#include <vector>

namespace manip_core
{
	struct RobotI;
}

class RootTrajectory : public TimerHandled_ABC
{
public:
	typedef Eigen::Vector3d point_t;
	typedef spline::curve_abc<> curve_abc_t;

	explicit RootTrajectory(curve_abc_t* /*spline*/, const matrices::Vector3& /*initDir*/);
	~RootTrajectory();

private:
	RootTrajectory(const RootTrajectory&);
	RootTrajectory& operator=(const RootTrajectory&);

public:
	virtual void Update(const Timer::t_time /*t*/, const Timer::t_time /*dt*/);
	std::vector<manip_core::RobotI*> ComputeUpdates(const Timer::t_time /*start*/, const Timer::t_time /*end*/, const Timer::t_time /*dt*/);
	virtual void Reset();

private:
	void ComputeOneUpdate(manip_core::RobotI* /*robot*/, const Timer::t_time /*t*/, const Timer::t_time /*dt*/);

private:
	curve_abc_t* spline_;
	matrices::Vector3 previous_;
	const matrices::Vector3 initDir_;
};

#endif //_CLASS_ROOTTRAJECTORY
